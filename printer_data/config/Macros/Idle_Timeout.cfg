[gcode_macro IDLE_SAFE_SHUTDOWN]
description: Sicherer Shutdown wenn Drucker zu lange idle ist
gcode:
  _STATUS_IDLE
  M118 Idle Timeout – führe sicheren Shutdown durch...

  # Heizungen aus
  TURN_OFF_HEATERS
  M104 S0
  M140 S0

  # Lüfter aus
  M107

  # Stepper deaktivieren
  SET_STEPPER_ENABLE STEPPER=stepper_x ENABLE=0
  SET_STEPPER_ENABLE STEPPER=stepper_y ENABLE=0
  SET_STEPPER_ENABLE STEPPER=stepper_z ENABLE=0
  SET_STEPPER_ENABLE STEPPER=stepper_z1 ENABLE=0
  SET_STEPPER_ENABLE STEPPER=stepper_z2 ENABLE=0

  # LEDs (falls vorhanden)
  # SET_LED LED=caselight WHITE=0.1

  RESPOND TYPE=error MSG="Idle Shutdown aktiviert! Bitte bestätigen."